/**
 * 统一配置管理 - 单一数据源
 * 所有配置参数在此定义，其他模块从此导入
 */

// ============================================================================
// 粒子系统配置
// ============================================================================

export const PARTICLE_CONFIG = {
  PARTICLE_COUNT: 2000,
  BASE_RADIUS: 2.0,
  PARTICLE_SIZE: 0.05,
} as const;

// ============================================================================
// 手势交互配置
// ============================================================================

export const GESTURE_CONFIG = {
  PINCH_THRESHOLD: 0.08,  // 捏合阈值（统一值）
  BOUNDARY_Y: 4.5,
} as const;

// ============================================================================
// 扩展控制配置
// ============================================================================

export const SPREAD_CONFIG = {
  SPREAD_MIN: 0.3,
  SPREAD_MAX: 5.0,
  SPREAD_SMOOTHING: 0.1,
} as const;

// ============================================================================
// 涟漪效果配置
// ============================================================================

export const RIPPLE_CONFIG = {
  RIPPLE_DURATION: 2000,
  RIPPLE_EXPANSION_SPEED: 0.005,
  RIPPLE_WIDTH: 0.5,
} as const;

// ============================================================================
// 颜色配置
// ============================================================================

export const COLOR_CONFIG = {
  DEFAULT_COLOR: { r: 1.0, g: 0.0, b: 1.0 },  // 洋红色
} as const;

// ============================================================================
// 相机配置
// ============================================================================

export const CAMERA_CONFIG = {
  CAMERA_FOV: 75,
  CAMERA_NEAR: 0.1,
  CAMERA_FAR: 1000,
  CAMERA_Z: 5,
} as const;

// ============================================================================
// 手部关键点连接配置
// ============================================================================

export const HAND_CONNECTIONS = [
  [0, 1], [1, 2], [2, 3], [3, 4],       // 拇指
  [0, 5], [5, 6], [6, 7], [7, 8],       // 食指
  [0, 9], [9, 10], [10, 11], [11, 12],  // 中指
  [0, 13], [13, 14], [14, 15], [15, 16], // 无名指
  [0, 17], [17, 18], [18, 19], [19, 20], // 小指
  [5, 9], [9, 13], [13, 17],             // 手掌
] as const;

// ============================================================================
// 视图配置
// ============================================================================

export const VIEW_CONFIG = {
  MIRROR_X: true,  // 显示通过CSS镜像，保留原始坐标用于交互
} as const;

// ============================================================================
// 手势检测内部配置
// ============================================================================

export const GESTURE_DETECTION_CONFIG = {
  FINGER_EXTENDED_RATIO: 1.2,
  PINCH_THRESHOLD: 0.08,  // 与 GESTURE_CONFIG.PINCH_THRESHOLD 相同
  OK_THRESHOLD: 0.06,
  WAVE_SPEED_THRESHOLD: 0.03,
  WAVE_COUNT_THRESHOLD: 3,
  WAVE_TIME_WINDOW: 1000,
  HELLO_WAVE_THRESHOLD: 3,
  HELLO_WAVE_TIME_WINDOW: 1500,
  POINTING_NO_CURL_THRESHOLD: 0.3,
  VICTORY_EXTENDED_ANGLE: 160,
  THUMB_UP_ANGLE_THRESHOLD: 160,
  PALM_DIRECTION_THRESHOLD: 0.5,
  FIST_CURLED_THRESHOLD: 0.6,
} as const;

// ============================================================================
// 交互配置
// ============================================================================

export const INTERACTION_CONFIG = {
  CLICK_TIMEOUT_MS: 1000,
  SCALE_MIN: 0.2,
  SCALE_MAX: 5.0,
  OUTLINE_SCALE_MULTIPLIER: 1.15,
} as const;

// ============================================================================
// 导出合并的配置（向后兼容）
// ============================================================================

export const CONFIG = {
  ...PARTICLE_CONFIG,
  ...GESTURE_CONFIG,
  ...SPREAD_CONFIG,
  ...RIPPLE_CONFIG,
  ...COLOR_CONFIG,
  ...CAMERA_CONFIG,
  CONNECTIONS: HAND_CONNECTIONS,
} as const;

export const VIEW = VIEW_CONFIG;
